<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MEDiVAULT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <nav class="navbar">
        <div class="nav-left">
            <a href="/" class="logo">MEDiVAULT</a>
            <div class="nav-links">
                <a href="#dashboard">Dashboard</a>
                <a href="#doctors">Doctors</a>
                <a href="#medicines">Medicines</a>
                <a href="#appointments">Appointments</a>
            </div>
        </div>
        <div class="nav-right">
            <div class="language-switcher">
                <select id="languageSelect" onchange="switchLanguage()">
                    <option value="en">English</option>
                    <option value="es">Espa√±ol</option>
                    <option value="fr">Fran√ßais</option>
                </select>
            </div>
            <div class="user-menu">
                <button class="user-btn" onclick="toggleUserMenu()" aria-label="User Menu">
                    <i class="fa fa-user"></i>
                </button>
                <div class="user-dropdown" id="userDropdown">
                    <a href="saved-doctors.html" class="dropdown-item"><i class="fa fa-user-md"></i> Saved Doctors</a>
                    <a href="uploaded-files.html" class="dropdown-item"><i class="fa fa-file-medical"></i> Uploaded
                        Prescriptions/Documents</a>
                    <a href="access-control.html" class="dropdown-item"><i class="fa fa-lock"></i> Access Control</a>
                    <a href="cloud-storage.html" class="dropdown-item"><i class="fa fa-cloud"></i> Cloud Storage</a>
                    <a href="site-settings.html" class="dropdown-item"><i class="fa fa-cog"></i> Site Settings</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="greetings">
        <h2>Welcome back, User!</h2>
        <p style="color: #ccc; font-size: 1.1rem;">Here's a quick snapshot of your health status and updates.</p>
    </div>

    <div class="dashboard">
        <div class="stat-box-container">
            <div class="stat-box blue">
                <div class="stat-left">
                    <h4>Total Records</h4>
                    <p class="stat-value" id="totalRecords">0</p>
                    <small>Medical records stored</small>
                </div>
                <div class="stat-icon"><i class="fa fa-file"></i></div>
            </div>

            <div class="stat-box green">
                <div class="stat-left">
                    <h4>Appointments</h4>
                    <p class="stat-value" id="appointmentsCount">0</p>
                    <small>Upcoming this week</small>
                </div>
                <div class="stat-icon"><i class="fa fa-calendar"></i></div>
            </div>

            <div class="stat-box purple">
                <div class="stat-left">
                    <h4>AI Insights</h4>
                    <p class="stat-value" id="aiInsights">0</p>
                    <small>Recent analysis</small>
                </div>
                <div class="stat-icon"><i class="material-icons" style="font-size: 40px;">poll</i></div>
            </div>

            <div class="stat-box red">
                <div class="stat-left">
                    <h4>Active Alerts</h4>
                    <p class="stat-value" id="alertCount">0</p>
                    <small>Requires attention</small>
                </div>
                <div class="stat-icon"><i class="fa fa-exclamation-circle"></i></div>
            </div>
        </div>
        <div class="section-card">
            <h2>Health Trends</h2>
            <div class="charts">
                <div class="card">
                    <h3>BP History</h3>
                    <canvas id="bpChart"></canvas>
                    <div class="chart-info">Latest(12/05/2025): 122/84 mmHg</div>
                </div>
                <div class="card">
                    <h3>Sugar History</h3>
                    <canvas id="sugarChart"></canvas>
                    <div class="chart-info">Latest(12/05/2025): 98 mg/dL</div>
                </div>
                <div class="card">
                    <h3>BMI</h3>
                    <canvas id="bmiGauge" width="280" height="140"></canvas>
                    <div class="bmi-legend">
                        <span>Underweight<br /><small>&lt; 18.5</small></span>
                        <span>Normal<br /><small>18.5‚Äì24.9</small></span>
                        <span>Overweight<br /><small>25‚Äì29.9</small></span>
                        <span>Obese<br /><small>30‚Äì34.9</small></span>
                        <!-- <span>Severe<br /><small>35+</small></span> -->
                    </div>
                    <div class="chart-info">Latest: 24.5</div>
                </div>
            </div>
        </div>
        <div class="info-row" style="margin-top: 2rem; margin-bottom: 4rem;">
            <div class="card">
                <h4>Allergy Alerts</h4>
                <ul>
                    <li>Penicillin</li>
                    <li>Pollen</li>
                </ul>
            </div>
            <div class="card">
                <h4>General Notes</h4>
                <p>Patient reports mild dizziness after medication. Monitor hydration and sleep.</p>
            </div>
            <div class="card">
                <h4>MEDICATIONS</h4>
                <ul>
                    <li>Metformin ‚Äì 500mg <span class="dosage-tag morning">Morning</span></li>
                    <li>Paracetamol ‚Äì 650mg <span class="dosage-tag as-needed">As Needed</span></li>
                    <li>Amlodipine ‚Äì 5mg <span class="dosage-tag night">Night</span></li>
                </ul>
            </div>
        </div>
        <!-- AUTO INSIGHTS SECTION -->
        <div class="section-card" style="padding: 0;">
            <div class="insight-score-row">
                <!-- circular health bar -->
                <div class="score-circle-box">
                    <h2><i class="fa fa-heart">Health Score</i></h2>
                    <div class="circular-score">
                        <svg viewBox="0 0 36 36">
                            <path class="bg"
                                d="M18 2.0845 a 15.9155 15.9155 0 1 1 0 31.831 a 15.9155 15.9155 0 1 1 0 -31.831" />
                            <path id="scoreArc" class="progress" stroke-dasharray="0, 100"
                                d="M18 2.0845 a 15.9155 15.9155 0 1 1 0 31.831 a 15.9155 15.9155 0 1 1 0 -31.831" />
                            <text x="50%" y="50%" class="percentage">93%</text>
                        </svg>
                        <p class="score-subtext">You're doing well! Monitor BP & meds</p>
                    </div>
                </div>
                <!-- auto insights -->
                <div class="insight-box">
                    <h2>üìä Auto Insights</h2>
                    <ul class="insight-list">
                        <li><span class="critical">‚ö†Ô∏è High BP trend over past 3 weeks</span></li>
                        <li><span class="alert">üß™ New medication: Telmisartan</span></li>
                        <li><span class="okay">‚úÖ Sugar levels stable (5 reports)</span></li>
                        <li><span class="info">ü©∫ Last visit: Dr. Roy ‚Äì 5 days ago</span></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="section-card">
            <h2>Upload Prescriptions</h2>
            <div class="upload-prescription-wrapper">
                <div class="upload-box" id="uploadBox">
                    <i class="fa fa-upload" style="font-size:300px"></i>
                    <p>Drop file here or click to upload</p>
                </div>
                <div id="uploadListWrapper" class="history-box">
                    <div id="uploadPlaceholder" class="upload-placeholder">
                        <i class="fa fa-history" style="font-size: 100px;"></i>
                        <p>No prescriptions uploaded yet.</p>
                    </div>
                    <div id="uploadList" class="history-box"></div>
                </div>
            </div>
        </div>
        <div class="drpanel">
            <div class="section-card">
                <h2>Doctor Panel</h2>
                <div class="doctor-panel">
                    <!-- <div class="section-card doctor-history-card">
                        <h3>Doctor History</h3>
                        <div id="doctorList" class="doctor-list-box"></div>
                    </div> -->
                    <div class="section-card doctor-history-card">
                        <h2>Doctor Panel</h2>

                        <div class="doctor-toggle-btns">
                            <button class="toggle-btn active" onclick="showDoctorSection('history')">ü©∫ Doctor
                                History</button>
                            <button class="toggle-btn" onclick="showDoctorSection('alternatives')">üîç Find
                                Alternatives</button>
                        </div>

                        <!-- Keep height and scroll intact -->
                        <div style="height: 480px; overflow: hidden;">
                            <div id="doctorHistorySection" class="doctor-switch-section" style="height: 100%;">
                                <div id="doctorList" class="doctor-list-box"></div>
                            </div>

                            <div id="doctorAlternativeSection" class="doctor-switch-section"
                                style="display: none; height: 100%; overflow-y: auto;">
                                <div class="alt-doctor-search">
                                    <label for="specializationSelect">Select Specialization:</label>
                                    <select id="specializationSelect">
                                        <option value="Cardiology">Cardiology</option>
                                        <option value="Endocrinology">Endocrinology</option>
                                        <option value="Neurology">Neurology</option>
                                        <option value="Orthopedics">Orthopedics</option>
                                    </select>
                                    <button onclick="showAlternativeDoctors()">Search</button>
                                </div>
                                <div id="alternativeList" class="doctor-list-box"></div>
                            </div>
                        </div>
                    </div>
                    <div class="doctor-card upcoming">
                        <h4>Upcoming Appointments</h4>
                        <div class="appointment-entry">
                            <div class="appt-date">
                                <span class="day">14</span>
                                <span class="month">JUL</span>
                            </div>
                            <div class="appt-details">
                                <p><i class="fa fa-user-md"></i><strong> Dr. Aritra Ghosh</strong></p>
                                <p>üïì 10:30 AM | <span style="color:red"><i class="fa fa-map-marker"></i></span>
                                    Ghosh Medical Chambers</p>
                                <div class="appt-actions">
                                    <span class="status-badge upcoming">Upcoming</span>
                                    <div class="more-actions-wrapper">
                                        <button class="more-actions-btn" onclick="toggleMoreActions(this)">‚ãÆ
                                            More Actions</button>
                                        <div class="more-actions-menu">
                                            <button onclick="alert('Requesting to cancel...')">Cancel</button>
                                            <button onclick="alert('Requesting to postpone...')">Postpone</button>
                                            <button onclick="alert('Requesting to prepone...')">Prepone</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="appointment-entry">
                            <div class="appt-date">
                                <span class="day">02</span>
                                <span class="month">AUG</span>
                            </div>
                            <div class="appt-details">
                                <p><i class="fa fa-user-md"></i><strong> Dr. Aritra Ghosh</strong></p>
                                <p>üïì 2:00 PM | <span style="color:red"><i class="fa fa-map-marker"></i></span>
                                    Ghosh Medical Chambers</p>
                                <div class="appt-actions">
                                    <span class="status-badge upcoming">Upcoming</span>
                                    <div class="more-actions-wrapper">
                                        <button class="more-actions-btn" onclick="toggleMoreActions(this)">‚ãÆ
                                            More Actions</button>
                                        <div class="more-actions-menu">
                                            <button onclick="alert('Requesting to cancel...')"><i class="fa fa-times"
                                                    style="color: red;"></i></button>
                                            <button onclick="alert('Requesting to postpone...')">Postpone</button>
                                            <button onclick="alert('Requesting to prepone...')">Prepone</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="sync-btn" onclick="syncCalendar()">üìÖ Sync with Calendar</button>
                    </div>
                    <div class="doctor-card request">
                        <h4>Request an Appointment</h4>
                        <form class="appointment-form" onsubmit="event.preventDefault(); submitAppointment();">
                            <!-- <input type="text" id="patientName" placeholder="Your Name" required> -->
                            <!-- <input type="email" id="patientEmail" placeholder="Your Email" required> -->
                            <input type="datetime-local" id="appointmentDate" required>
                            <textarea id="reason" placeholder="Reason for appointment" rows="3" required></textarea>
                            <button type="submit">Request Appointment</button>
                        </form>
                        <div id="appointmentStatus" style="margin-top: 1rem; color: lightgreen;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section-card">
            <h3>üìÜ Health Timeline</h3>
            <div class="timeline-wrapper">
                <div class="timeline-track">
                    <div class="timeline-event top">
                        <div class="dot"></div>
                        <div class="event-content">
                            <strong>Jul 8</strong>
                            <p>Prescription Uploaded</p>
                        </div>
                    </div>
                    <div class="timeline-event bottom">
                        <div class="dot"></div>
                        <div class="event-content">
                            <strong>Jul 7</strong>
                            <p>AI detected high BP</p>
                        </div>
                    </div>
                    <div class="timeline-event top">
                        <div class="dot"></div>
                        <div class="event-content">
                            <strong>Jul 5</strong>
                            <p>Appointment: Dr. Ghosh</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="section-card">
            <h2>Doctor's Remark</h2>
            <textarea readonly>Continue same dosage. Monitor BP weekly.</textarea>
        </div>
    </div>
    </div>



    <button class="chatbot-toggle" onclick="toggleChatbot()">üí¨</button>
    <div id="chatbotBox" class="chatbot-placeholder">
        <h4 style="margin-top: 0;">MediVault Assistant (coming soon)</h4>
        <p>This is a placeholder for the AI chatbot.</p>
    </div>
    <div class="emergency-card-fixed" id="emergencycard" onclick="toggleHealthCardModal()">
        <img src="https://api.qrserver.com/v1/create-qr-code/?data=Emergency+User+Info&size=100x100"
            alt="Emergency QR" />
        <p>Emergency</p>
    </div>

    <!-- Hidden Modal for Details -->
    <div class="modal-backdrop" id="healthCardBackdrop" onclick="closeHealthCardModal()" style="display: none;"></div>
    <div class="health-card-modal" id="healthCardModal" style="display: none;">
        <h3>üö® Emergency Health Card</h3>
        <p><strong>Name:</strong> User</p>
        <p><strong>Blood Group:</strong> O+</p>
        <p><strong>Allergies:</strong> Penicillin, Dust</p>
        <p><strong>Conditions:</strong> Hypertension</p>
        <p><strong>Contact:</strong> +91-9876543210</p>
        <button onclick="closeHealthCardModal()">Close</button>
    </div>
    <footer
        style="background: rgba(0,0,0,0.7); color: #ccc; text-align: center; padding: 1.5rem 0; margin-top: 2rem; font-size: 1rem;">
        <div
            style="max-width: 900px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 1rem;">
            <div style="flex: 1; min-width: 200px; text-align: left;">
                <span style="font-weight: bold; color: #4caf50;"><i class="fa fa-heart"></i> MediVault</span> &copy;
                2025
            </div>
            <div style="flex: 2; min-width: 200px;">
                <a href="#" style="color: #ccc; margin: 0 1rem; text-decoration: none;">Privacy Policy</a>
                <a href="#" style="color: #ccc; margin: 0 1rem; text-decoration: none;">Terms of Service</a>
                <a href="#" style="color: #ccc; margin: 0 1rem; text-decoration: none;">Contact</a>
            </div>
            <div style="flex: 1; min-width: 200px; text-align: right;">
                <span>Made with <i class="fa fa-heart" style="color: #e91e63;"></i> for your health</span>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>

</html>
